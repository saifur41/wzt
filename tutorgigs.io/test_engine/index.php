<?php    //header   require_once 'includes/header.php';      // Tally up totals  $testList = mysqli_query($connection, "SELECT * FROM tests");  $totalTests = $testList->num_rows;  $result = mysqli_query($connection, "SELECT * FROM tests WHERE IsActive=1");  $totalActive = $result->num_rows;  $result = mysqli_query($connection, "SELECT * FROM tests WHERE IsActive=0");  $totalNotActive = $result->num_rows;          ?>					<!--begin::Content-->					<div class="content d-flex flex-column flex-column-fluid" id="kt_content">						<!--begin::Subheader-->						<div class="subheader py-2 py-lg-6 subheader-transparent" id="kt_subheader">							<div class="container d-flex align-items-center justify-content-between flex-wrap flex-sm-nowrap">								<!--begin::Info-->																<!--end::Info-->								<!--begin::Toolbar-->																<!--end::Toolbar-->							</div>						</div>						<!--end::Subheader-->						<!--begin::Entry-->						<div class="d-flex flex-column-fluid">							<!--begin::Container-->							<div class="container">								<!--begin::Notice-->                                                                <div class="row">								<div class="col-xl-4">										<!--begin::Stats Widget 20-->										<div class="card card-custom card-stretch gutter-b">											<!--begin::Body-->                                                                                        <div class="card-body my-4" style="padding-top: 0px;padding-bottom: 0px">												<a href="#" class="card-title font-weight-bolder text-warning font-size-h6 mb-4 text-hover-state-dark d-block">Total Test</a>												<div class="font-weight-bold text-muted font-size-sm">												<span class="text-dark-75 font-weight-bolder font-size-h2 mr-2"><?php echo $totalTests;?></div>																							</div>											<!--end::Body-->										</div>										<!--end::Stats Widget 20-->									</div>                                                                <div class="col-xl-4">										<!--begin::Stats Widget 20-->										<div class="card card-custom card-stretch gutter-b">											<!--begin::Body-->                                                                                        <div class="card-body my-4" style="padding-top: 0px;padding-bottom: 0px">												<a href="#" class="card-title font-weight-bolder text-success font-size-h6 mb-4 text-hover-state-dark d-block">Total Active Test</a>												<div class="font-weight-bold text-muted font-size-sm">												<span class="text-dark-75 font-weight-bolder font-size-h2 mr-2"><?php echo $totalActive;?></div>																							</div>											<!--end::Body-->										</div>										<!--end::Stats Widget 20-->									</div>                                                                <div class="col-xl-4">										<!--begin::Stats Widget 20-->										<div class="card card-custom card-stretch gutter-b">											<!--begin::Body-->                                                                                        <div class="card-body my-4" style="padding-top: 0px;padding-bottom: 0px">												<a href="#" class="card-title font-weight-bolder text-danger font-size-h6 mb-4 text-hover-state-dark d-block">Total Inactive Test</a>												<div class="font-weight-bold text-muted font-size-sm">												<span class="text-dark-75 font-weight-bolder font-size-h2 mr-2"><?php echo $totalNotActive;?></div>																							</div>											<!--end::Body-->										</div>										<!--end::Stats Widget 20-->									</div>                                                                    </div>								<!--begin::Card-->								<div class="card card-custom">									<div class="card-header flex-wrap py-5">										<div class="card-title">											<h3 class="card-label">Tests											<div class="text-muted pt-2 font-size-sm">custom colu rendering</div></h3>										</div>										<div class="card-toolbar">																						<!--end::Dropdown-->											<!--begin::Button-->											<button data-toggle="modal" data-target="#exampleModalSizeDefault" class="btn btn-primary font-weight-bolder">                                                                                            <i class="la la-plus-circle" style="font-size: 20px"></i>New Test</button>											<!--end::Button-->										</div>									</div>									<div class="card-body">                                                                             <?php                                                                            if(isset($_SESSION['success'])) { ?>                                                                            <div class="alert alert-success" role="alert" style="text-align:center"><?php echo $_SESSION['success'];?></div>                                                                            <?php unset($_SESSION['success']); } ?>                                                                             <?php                                                                            if(isset($_SESSION['error'])) { ?>                                                                            <div class="alert alert-danger" role="alert" style="text-align:center"><?php echo $_SESSION['error'];?></div>                                                                            <?php unset($_SESSION['error']); } ?>										<!--begin: Datatable-->										<table class="table table-separate table-head-custom table-checkable" id="kt_datatable">											<thead>												<tr>													<th>Test Name</th>                                                                                                        <th>Passing Percent(%)</th>													<th># of Questions</th>													<th>Status</th>													<th>Actions</th>												</tr>											</thead>											<tbody>                                                                                            <?php	                                                                                                    while ( $tRecord = mysqli_fetch_array($testList) ) {                                                                                                                                                                                                               $tStatus = (string)$tRecord['IsActive'] == 1 ? 'Active' : 'Inactive';                                                                                                                                                                                                                $result = mysqli_query($connection, "SELECT * FROM questions WHERE TestID=".$tRecord['ID']) ;                                                                                                        $numQuestions = $result->num_rows;                                                                                              ?>												<tr>													<td><?php echo $tRecord['Name']; ?></td>                                                                                                        <td><?php echo $tRecord['PassingMark']; ?></td>													<td><?php echo $numQuestions; ?></td>													<td>                                                                                                            <?php if($tRecord['IsActive'] == 1) { ?>                                                                                                               <span class="label label-sm label-success label-pill label-inline mr-2">Active</span>                                                                                                            <?php } else { ?>                                                                                                               <span class="label label-sm label-danger label-pill label-inline mr-2">Inactive</span>                                                                                                            <?php } ?>                                                                                                           </td>																										<td nowrap="nowrap">                                                                                                            <div class="dropdown dropdown-inline">                                                                                                                <a href="<?php echo BASE_URL;?>questions.php?testID=<? echo $tRecord['ID'] ?>" class="btn btn-sm btn-clean btn-icon" title="View Qs and As for this Test">                                                                                                                    <i class="la la-question-circle text-warning" style="font-size: 23px"></i>	                                                                                                                                            </a>							  	                                                                                                                						                                                                                                            </div>                                                                                                            <?php if($tRecord['IsActive'] == 1){?>                                                                                                            <a href="javascript:;" title="Inactive the test" class="btn btn-sm btn-clean btn-icon" title="Edit details" onclick="toggleTestActive('<?php echo $tRecord['ID'];?>')">                                                                                                                <i class="la la-ban text-danger" style="font-size: 18px"></i>							                                                                                                            </a>                                                                                                            <?php } else {?>                                                                                                            <a href="javascript:;" title="Active the test" class="btn btn-sm btn-clean btn-icon" title="Edit details" onclick="toggleTestActive('<?php echo $tRecord['ID'];?>')">                                                                                                                <i class="la la-check-circle text-primary" style="font-size: 18px"></i>							                                                                                                            </a>                                                                                                            <?php } ?>                                                                                                            <a href="javascript:;" title="Edit the test" class="btn btn-sm btn-clean btn-icon" title="Edit details" onclick="editTest('<?php echo $tRecord['ID'];?>')">                                                                                                                <i class="la la-edit text-success" style="font-size: 20px"></i>							                                                                                                            </a>							                                                                                                            <a href="javascript:;" title="Delete the test" class="btn btn-sm btn-clean btn-icon" title="Delete" onclick="deleteTest(<?php echo $tRecord['ID'] ?>);">                                                                                                                <i class="la la-trash text-danger" style="font-size: 20px"></i>							                                                                                                            </a>						                                                                                                        </td>												</tr>                                                                                                                                                                                                    <?php } ?>																							</tbody>										</table>										<!--end: Datatable-->									</div>								</div>								<!--end::Card-->							</div>							<!--end::Container-->						</div>						<!--end::Entry-->					</div>                                                                                <div class="modal fade" id="exampleModalSizeDefault" tabindex="-1" role="dialog" aria-labelledby="exampleModalSizeDefault" aria-hidden="true">				             <div class="modal-dialog modal-dialog-centered" role="document">						<div class="modal-content">                                                    <form id="tForm" name="tForm" role="form" action="<?php echo BASE_URL;?>addTest.php" method="post">						<div class="modal-header">						  <h5 class="modal-title" id="exampleModalLabel">Create New Test</h5>						   <button type="button" class="close" data-dismiss="modal" aria-label="Close">						      <i aria-hidden="true" class="ki ki-close"></i>						  </button>						</div>					      <div class="modal-body">                                                        <input type="hidden" id="tCreator" name="tCreator" value="<?php echo $_SESSION['user']['id']; ?>">                                                  	<div class="form-group">								<label>Test Name</label>                                                                <input type="text" class="form-control" placeholder="Test Name" id="tName" name="tName" required="">							</div>	                                                       <div class="form-group">								<label>Passing Percent(%)</label>                                                                <input id="tName" name="percent" type="number" min="1" placeholder="e.g-30%" class="form-control" required>						       </div>                                                       <div class="form-group">								<label>Shown in Test List</label>									<div class="radio-inline">															<label class="radio">															<input type="radio" name="tIsActive" id="tIsActive-0" value="1" checked="checked">															<span></span>Active</label>															<label class="radio">															<input type="radio" name="tIsActive" id="tIsActive-1" value="0">															<span></span>Not Active</label>																													</div>																											</div>                                              </div>						<div class="modal-footer">						<button type="button" class="btn btn-light-primary font-weight-bold" data-dismiss="modal">Close</button>						<button type="submit" class="btn btn-primary font-weight-bold">Submit</button>					       </div>                                                        </form>					</div>				</div>			</div>                                                                                                                        <div class="modal fade" id="editTest" tabindex="-1" role="dialog" aria-labelledby="exampleModalSizeDefault" aria-hidden="true">				             <div class="modal-dialog modal-dialog-centered" role="document">						<div class="modal-content">                                                    <form id="tForm" name="tForm" role="form" action="<?php echo BASE_URL;?>editTest.php" method="post">						<div class="modal-header">						  <h5 class="modal-title" id="exampleModalLabel">Edit Test</h5>						   <button type="button" class="close" data-dismiss="modal" aria-label="Close">						      <i aria-hidden="true" class="ki ki-close"></i>						  </button>						</div>					      <div class="modal-body" id="test_body">                                                                                                     </div>						<div class="modal-footer">						<button type="button" class="btn btn-light-primary font-weight-bold" data-dismiss="modal">Close</button>						<button type="submit" class="btn btn-primary font-weight-bold">Submit</button>					       </div>                                                        </form>					</div>				</div>			</div>					<!--end::Content--><?php    //header   require_once 'includes/footer.php';?><script type="text/javascript">        				        function deleteTest ( testID ) {            window.location = "<?php echo BASE_URL;?>deleteTest.php?testID=" + testID ;        }                function toggleTestActive( testID ) {            window.location = "<?php echo BASE_URL;?>toggleTest.php?testID=" + testID ;        }                function editTest(test_id)        {                      $.ajax({            type: 'GET',            url: "<?php echo BASE_URL;?>/getTest.php?test_id="+test_id, // a public, HTTP POST sandbox that returns the POST data            success: function(data) {              $('#test_body').html(data);                $('#editTest').modal('show');            }          });        }        </script>                                        