<?php    //header   require_once 'includes/db_connect.php';      @extract($_POST);   @extract($_GET);   if( isset($_POST['login_submit']) )    {        $user_name = $_POST['email'];        $password  = $_POST['password'];        $role      = $_POST['role'];                $email = stripslashes($user_name);        $email = mysql_real_escape_string($email);        $md5password = md5($password);                                        if($role =="administrator")        {               // SQL query to fetch information of registerd users and finds user match.           $query = mysqli_query($connection, "SELECT * FROM gig_admins WHERE password='$md5password' AND email='$email' AND status=0 LIMIT 1");           //$query = mysql_query("SELECT * FROM gig_admins WHERE password='$md5password' AND email='$email' AND status=0 LIMIT 1", $link)or die(mysql_error());           $rows = mysql_num_rows($query);          if ($rows == 1) {          $row = mysqli_fetch_assoc($query);          $lastest_login = date('Y-m-d H:i:s');          //$query = mysql_query("UPDATE users SET latest_login='$lastest_login' WHERE password='$md5password' AND email='$email'", $link);         // $query2 = mysql_query("UPDATE gig_admins SET latest_login='$lastest_login' WHERE id='".$row['id']."'", $link) or die(mysql_error());          $_SESSION['login_id']     = $row['id'];          $_SESSION['login_user']   = $row['user_name']; // Initializing Session          $_SESSION['login_mail']   = $row['email'];          $_SESSION['login_role']   = $row['role'];          $_SESSION['login_status'] = $row['status'];            // Init session first login      //if( $row['email'] == 'demo@p2g.org' )        $_SESSION['firstlogin'] = true;      // Redirecting To Other Page myadmin/login.php                        $error = "Success, login";            //Allow reduced admin called manager login      //kh JIRA- MANPORTAL      if($row['role']=="100"){  //Basic Manager              header("location:./mymanager/index.php");exit;            }         elseif ($row['role']=="101"){  //Frog tutoring              header("location:./mymanager/index.php");exit;            }      elseif ($row['role']=="102"){   // Tutor4U              header("location:./mymanager/index.php");exit;            }      else{  //Full Admin              header("location:./myadmin/index.php");exit;            }    } else {      $error = "Email or Password is invalid";    }        }/* start tutor login*/else if($role =="teacher"){      //$error = "Can Not login now";      $query = mysql_query("SELECT * FROM gig_teachers WHERE password='$md5password' AND email='$email' LIMIT 1", $link);      $rows = mysql_num_rows($query);      if ($rows == 1)       {            $data= mysql_fetch_assoc($query);            if($data['status']==0){              $_SESSION['suspended']='Your account inactive, Please confirm email. !';            }elseif($data['status']==2){               $_SESSION['suspended']='Your account suspended, Please contact service provider. !';            // suspended             }else{                    $lastest_login = date('Y-m-d H:i:s');                    $_SESSION['ses_teacher_id']=$data['id']; // ses_teacher_id# login_id                    $_SESSION['ses_curr_state_url']=($data['all_state']=='no')?$data['all_state_url']:'home.php';  // next default: application.php                    $_SESSION['ses_total_pass']=$data['total_pass_quiz'];  // no                    $_SESSION['ses_access_website']=$data['all_state'];  //yes or No                    $_SESSION['login_user']=(!empty($data['f_name']))?$data['f_name']:$data['email']; // Initializing Session                    $_SESSION['login_mail']=$data['email'];                    $_SESSION['login_role']=1;                    $error = "Login success..Tutor";                    mysql_query("UPDATE  gig_teachers SET  `loginStatus`='1' WHERE id='".$data['id']."'", $link);                    header("location:./dashboard/index.php");exit;            }            //$_SESSION['login_status']=$row['status'];               //1       }      else{         $error= "Invalid Email&Password Combination ";    }}                /* end tutor lohin*/                        }?><!DOCTYPE html><!--Template Name: Metronic - Bootstrap 4 HTML, React, Angular 10 & VueJS Admin Dashboard ThemeAuthor: KeenThemesWebsite: http://www.keenthemes.com/Contact: support@keenthemes.comFollow: www.twitter.com/keenthemesDribbble: www.dribbble.com/keenthemesLike: www.facebook.com/keenthemesPurchase: https://1.envato.market/EA4JPRenew Support: https://1.envato.market/EA4JPLicense: You must have a valid license purchased only from themeforest(the above link) in order to legally use the theme for your project.--><html lang="en">	<!--begin::Head-->	<head><base href="../../../../">		<meta charset="utf-8" />		<title>Interven Test Engine | Login</title>		<meta name="description" content="Login page example" />		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />				<!--begin::Fonts-->		<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700" />		<!--end::Fonts-->		<!--begin::Page Custom Styles(used by this page)-->		<link href="<?php echo BASE_URL;?>assets/css/pages/login/classic/login-2.css" rel="stylesheet" type="text/css" />		<!--end::Page Custom Styles-->		<!--begin::Global Theme Styles(used by all pages)-->		<link href="<?php echo BASE_URL;?>assets/plugins/global/plugins.bundle.css" rel="stylesheet" type="text/css" />		<link href="<?php echo BASE_URL;?>assets/plugins/custom/prismjs/prismjs.bundle.css" rel="stylesheet" type="text/css" />		<link href="<?php echo BASE_URL;?>assets/css/style.bundle.css" rel="stylesheet" type="text/css" />		<!--end::Global Theme Styles-->		<!--begin::Layout Themes(used by all pages)-->		<!--end::Layout Themes-->		<link rel="shortcut icon" href="<?php echo BASE_URL;?>assets/media/logos/favicon.ico" />	</head>	<!--end::Head-->	<!--begin::Body-->	<body id="kt_body" class="header-fixed header-mobile-fixed header-bottom-enabled subheader-enabled page-loading">		<!--begin::Main-->		<div class="d-flex flex-column flex-root">			<!--begin::Login-->			<div class="login login-2 login-signin-on d-flex flex-column flex-lg-row flex-column-fluid bg-white" id="kt_login">				<!--begin::Aside-->				<div class="login-aside order-2 order-lg-1 d-flex flex-column-fluid flex-lg-row-auto bgi-size-cover bgi-no-repeat p-7 p-lg-10">					<!--begin: Aside Container-->					<div class="d-flex flex-row-fluid flex-column justify-content-between">						<!--begin::Aside body-->						<div class="d-flex flex-column-fluid flex-column flex-center mt-5 mt-lg-0">							<a href="#" class="mb-15 text-center">								<img src="<?php echo BASE_URL;?>assets/media/logos/logo-letter-1.png" class="max-h-75px" alt="" />							</a>							<!--begin::Signin-->							<div class="login-form login-signin">								<div class="text-center mb-10 mb-lg-20">									<h2 class="font-weight-bold">Sign In</h2>									<p class="text-muted font-weight-bold">Enter your username and password</p>								</div>								<!--begin::Form-->                                                              <?php if(isset($error)){ ?><div class="alert alert-danger" role="alert"> <?php echo $error; ?> </div><?php } ?>								<form class="form" novalidate="novalidate" id="kt_login_signin_form" method="post">                                                                        <div class="form-group py-3 m-0">                                                                            <select name="role" class="form-control uname h-auto border-0 px-0 placeholder-dark-75" required=""  placeholder="Role">                                                                                 <option value="">Role</option>                                                                                <option <?=(@$_POST['role']=="administrator")?"selected":NULL; ?> value="administrator">Administrator</option>                                                                                <option <?=(@$_POST['role']=="teacher")?"selected":NULL; ?> value="teacher">Tutor</option>                                                                                                                                        </select>                                                                        </div>									<div class="form-group py-3 m-0">                                                                            <input class="form-control h-auto border-0 px-0 placeholder-dark-75" type="email" name="email" value="<?=@$_POST['email']?>" placeholder="Email" required="" autocomplete="off" />									</div>									<div class="form-group py-3 border-top m-0">                                                                            <input class="form-control h-auto border-0 px-0 placeholder-dark-75" type="password" value="<?=@$_POST['password']?>" name="password" id="inputPassword" placeholder="Password" required="" />									</div>																		<div class="form-group d-flex flex-wrap justify-content-between align-items-center mt-2">																				<button id="kt_login_signin_submit" class="btn btn-primary font-weight-bold px-9 py-4 my-3">Sign In</button>									</div>								</form>								<!--end::Form-->							</div>							<!--end::Signin-->							<!--begin::Signup-->																					<!--end::Forgot-->						</div>						<!--end::Aside body-->						<!--begin: Aside footer for desktop-->						<div class="d-flex flex-column-auto justify-content-between mt-15">							<div class="text-dark-50 font-weight-bold order-2 order-sm-1 my-2">Â© 2020 Interven</div>							<div class="d-flex order-1 order-sm-2 my-2">								<a href="#" class="text-muted text-hover-primary">Privacy</a>								<a href="#" class="text-muted text-hover-primary ml-4">Legal</a>								<a href="#" class="text-muted text-hover-primary ml-4">Contact</a>							</div>						</div>						<!--end: Aside footer for desktop-->					</div>					<!--end: Aside Container-->				</div>				<!--begin::Aside-->				<!--begin::Content-->				<div class="order-1 order-lg-2 flex-column-auto flex-lg-row-fluid d-flex flex-column p-7" style="background-image: url(<?php echo BASE_URL;?>assets/media/bg/bg-4.jpg);">					<!--begin::Content body-->					<div class="d-flex flex-column-fluid flex-lg-center">						<div class="d-flex flex-column justify-content-center">							<h3 class="display-3 font-weight-bold my-7 text-white">Welcome to Interven Test Engine!</h3>							<p class="font-weight-bold font-size-lg text-white opacity-80">The ultimate Bootstrap, Angular 8, React &amp; VueJS admin theme							<br />framework for next generation web apps.</p>						</div>					</div>					<!--end::Content body-->				</div>				<!--end::Content-->			</div>			<!--end::Login-->		</div>		<!--end::Main-->		<script>var HOST_URL = "https://preview.keenthemes.com/metronic/theme/html/tools/preview";</script>		<!--begin::Global Config(global config for global JS scripts)-->		<script>var KTAppSettings = { "breakpoints": { "sm": 576, "md": 768, "lg": 992, "xl": 1200, "xxl": 1200 }, "colors": { "theme": { "base": { "white": "#ffffff", "primary": "#6993FF", "secondary": "#E5EAEE", "success": "#1BC5BD", "info": "#8950FC", "warning": "#FFA800", "danger": "#F64E60", "light": "#F3F6F9", "dark": "#212121" }, "light": { "white": "#ffffff", "primary": "#E1E9FF", "secondary": "#ECF0F3", "success": "#C9F7F5", "info": "#EEE5FF", "warning": "#FFF4DE", "danger": "#FFE2E5", "light": "#F3F6F9", "dark": "#D6D6E0" }, "inverse": { "white": "#ffffff", "primary": "#ffffff", "secondary": "#212121", "success": "#ffffff", "info": "#ffffff", "warning": "#ffffff", "danger": "#ffffff", "light": "#464E5F", "dark": "#ffffff" } }, "gray": { "gray-100": "#F3F6F9", "gray-200": "#ECF0F3", "gray-300": "#E5EAEE", "gray-400": "#D6D6E0", "gray-500": "#B5B5C3", "gray-600": "#80808F", "gray-700": "#464E5F", "gray-800": "#1B283F", "gray-900": "#212121" } }, "font-family": "Poppins" };</script>		<!--end::Global Config-->		<!--begin::Global Theme Bundle(used by all pages)-->		<script src="<?php echo BASE_URL;?>assets/plugins/global/plugins.bundle.js"></script>		<script src="<?php echo BASE_URL;?>assets/plugins/custom/prismjs/prismjs.bundle.js"></script>		<script src="<?php echo BASE_URL;?>assets/js/scripts.bundle.js"></script>		<!--end::Global Theme Bundle-->		<!--begin::Page Scripts(used by this page)-->		<script src="<?php echo BASE_URL;?>assets/js/pages/custom/login/login-general.js"></script>		<!--end::Page Scripts-->	</body>	<!--end::Body--></html>